(function(a,b){b.provide(window,"showConfirm",function(c){var d=confirm(b.Language.get("ban-co-chac-muon-thuc-hien-thao-tac-nay"));if(d){window.location.href=c}});b.provide(window,"reloadImage",function(d,i){var c=a.one("#"+d);if(c){var g=c.attr("src");var h=g.split(/[\?|&]d=zzz\d+zzz/i);var f=new Date();var e=g.indexOf("?");if(e!=-1){c.attr("src",h[0]+"&d=zzz"+f.getTime()+"zzz")}else{c.attr("src",h[0]+"?d=zzz"+f.getTime()+"zzz")}}a.one("#"+i).val("")});b.provide(window,"showDialogSend",function(c,g,e,f){var d=new a.Dialog({title:b.Language.get(g),id:"<portlet:namespace />dialogId",centered:true,resizable:false,draggable:true,modal:true,destroyOnClose:true,width:800,height:600,buttons:[{handler:function(){var h=this;var j={};getNoiDung();var i=true;a.one("#"+f).all("input,textarea").each(function(m){var n=m.val();if(m.attr("name")==e+"noiDung"){if(""==getNoiDung()){m.get("parentNode").setStyle("border","1px solid #FF8A6D")}else{m.get("parentNode").setStyle("border","none")}}else{if(""==n&&m.attr("name")!=e+"phone"){m.addClass("aui-form-validator-error");i=false}else{if(m.attr("name")==e+"email"){var l=/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;if(!l.test(n)){m.addClass("aui-form-validator-error");i=false}else{m.removeClass("aui-form-validator-error")}}else{m.removeClass("aui-form-validator-error")}}}});if(i){a.one("#"+f).all("input,textarea").each(function(l){var m=l.val();if(l.attr("name")==e+"noiDung"){j.noiDung=getNoiDung()}else{j[l.attr("name").replace(e,"")]=m}});var k=["java.lang.String","com.liferay.portal.service.ServiceContext"];b.Service.HD.HoiDap.addHoiDap({json:JSON.stringify(j),serviceContext:JSON.stringify({communityPermissions:"VIEW",guestPermissions:"VIEW",scopeGroupId:themeDisplay.getScopeGroupId(),userId:themeDisplay.getUserId(),companyId:themeDisplay.getCompanyId(),}),serviceParameterTypes:JSON.stringify(k)},function(m){var l=m.exception;reloadImage(e+"captchaImg",e+"captchaText");if(!l){h.close();alert(b.Language.get("gui-cau-hoi-thanh-cong"))}else{if(l.indexOf("CaptchaException")!=-1){alert(b.Language.get("ban-chua-nhap-dung-ma-kiem-tra"))}else{alert(l)}}})}},label:b.Language.get("gui")},{handler:function(){this.close()},label:b.Language.get("close")}]}).plug(a.Plugin.IO,{uri:c}).render();d.plug(a.LoadingMask);d.loadingmask.show();d.show()},["aui-base","aui-dialog","aui-loading-mask","json","liferay-portlet-url"])}(AUI(),Liferay));